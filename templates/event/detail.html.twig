{% extends 'base.html.twig' %}

{% block body %}

    <p>Name : {{ event.name }}</p>
    <p>Create by : {{ event.organisator.pseudo }}</p>
    <p>Date & Hour : {{ event.startingDate | date('d/m/Y - h:m' ) }}</p>
    <p>Inscription limit : {{ event.limitInscribeDate | date('d/m/Y & h:m' )  }}</p>
    <p>Max affluence: {{ event.maxInscriptionsNumber }} persons</p>
    <p>Duration : {{ event.duration }} minutes</p>
    <p>Description & informations : {{ event.informations }}</p>
    <p>Campus : {{ event.campus }}</p>
    <p>Place : </p>
    <p>Street : </p>
    <p>CP : </p>
    <p>Latitude : </p>
    <p>longitude : </p>

    {% set countParticipants = 0 %}
    <h4>Participants : </h4>

    {% for participant in event.participants %}
        {% set countParticipants = countParticipants + 1 %}
        <p>{{ participant.pseudo }}</p>
    {% endfor %}
    <p>Actual affluence for this event: {{ countParticipants }}</p>

    {% if app.user.pseudo is same as (event.organisator.pseudo) %}
        <a href="{{ path('event_modify', {'id': event.id }) }}">
            <button value="modify">Modify the event</button>
        </a>
    {% endif %}

    {% if app.user.pseudo is same as (event.organisator.pseudo) %}
        <a href="{{ path('event_delete', {'id': event.id }) }}">
            <button value="delete">Delete</button>
        </a>
    {% endif %}

    {% if app.user.id %}
        {% if (event.etat.Id is same as 2) and (countParticipants < event.maxInscriptionsNumber) %}
        <a href="{{ path('event_registration', {'event': event.id}) }}">
            <button value="registration">Registration to event</button>
        </a>
            {% else %}
            <p>Max affluence reached! Impossible for you to register yourself for this event. Wait for a disclaimer!</p>
        {% endif %}
    {% endif %}

    {% if app.user.pseudo %}

        <a href="{{ path('event_remove', {'event': event.id}) }}">
            <button value="remove">Unsubscribe to event</button>
        </a>

    {% endif %}

    {% if app.user.pseudo is same as (event.organisator.pseudo) %}
        <a href="{{ path('event_close', {'id': event.id }) }}">
            <button value="close">Close the event</button>
        </a>
    {% endif %}

{% endblock %}

